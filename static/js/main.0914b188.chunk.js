(this["webpackJsonpchallenge-aerolab"]=this["webpackJsonpchallenge-aerolab"]||[]).push([[0],{64:function(e,t,c){},65:function(e,t,c){},66:function(e,t,c){"use strict";c.r(t);var s=c(1),r=c.n(s),n=c(29),a=c.n(n),o=c(3),i=c(9),l=c.n(i),d="https://coding-challenge-api.aerolab.co",j={"Content-Type":"application/json",Accept:"application/json",Authorization:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MTM4M2E0OWYxYzA1YTAwMWE5YmUyNzkiLCJpYXQiOjE2MzEwNzQ4ODl9.rWn5BlnvNFgTJxaZs4ApttJe9z9ejphgYzUGc6qw3HQ"},u=l.a.get("".concat(d,"/products"),{headers:j}),b=c(0),O=Object(s.createContext)({}),p=function(e){var t=e.children,c=Object(s.useState)([]),r=Object(o.a)(c,2),n=r[0],a=r[1],i=Object(s.useState)(!1),l=Object(o.a)(i,2),d=l[0],j=l[1];Object(s.useEffect)((function(){!function(){try{u.then((function(e){var t=e.data;a(t),j(!0)})).catch((function(e){return console.log(e)}))}catch(e){console.log(e)}}()}),[]);var p={products:n,laodProducts:d};return Object(b.jsx)(O.Provider,{value:p,children:t})},h=c(11),x={"Content-Type":"application/json",Accept:"application/json",Authorization:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MTM4M2E0OWYxYzA1YTAwMWE5YmUyNzkiLCJpYXQiOjE2MzEwNzQ4ODl9.rWn5BlnvNFgTJxaZs4ApttJe9z9ejphgYzUGc6qw3HQ"},v={"Content-Type":"application/json",Accept:"application/json",Authorization:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MTM4M2E0OWYxYzA1YTAwMWE5YmUyNzkiLCJpYXQiOjE2MzEwNzQ4ODl9.rWn5BlnvNFgTJxaZs4ApttJe9z9ejphgYzUGc6qw3HQ"},m=l.a.get("https://coding-challenge-api.aerolab.co/user/me",{headers:v}),_=Object(s.createContext)({}),g=function(e){var t=e.children,c=Object(s.useState)({}),r=Object(o.a)(c,2),n=r[0],a=r[1],i=Object(s.useState)(!1),d=Object(o.a)(i,2),j=d[0],u=d[1];Object(s.useEffect)((function(){!function(){try{m.then((function(e){a(e.data),u(!0)})).catch((function(e){return console.log(e)}))}catch(e){console.log(e)}}()}),[]);var O={user:n,loadComplete:j,addPoint:function(){var e;n.points>15e3||(e=1e3,l.a.post("https://coding-challenge-api.aerolab.co/user/points",{amount:e},{headers:x})).then((function(e){var t=Object(h.a)(Object(h.a)({},n),{},{points:e.data["New Points"]});a(t)}))},setUser:a};return Object(b.jsx)(_.Provider,{value:O,children:t})},f=c(19),N=c(2),C=function(){return Object(b.jsx)("header",{className:"header",children:Object(b.jsx)("h1",{children:"Electronics"})})},y=c(14),P="lower_price",w="higher_price",z="most_recent",I=function(e){var t=Object(s.useState)(e),c=Object(o.a)(t,2),r=c[0],n=c[1],a=Object(s.useState)(0),i=Object(o.a)(a,2),l=i[0],d=i[1];return Object(s.useEffect)((function(){var t=e.slice(l,l+16);n(t)}),[l,e]),{productsFiltered:r,currentPage:l,prevPage:function(){l>0&&d(l-16)},nextPage:function(){if(e.length>l+16)return d(l+16)},setCurrentPage:d}},J=c.p+"static/media/arrow-left.e6eb9be1.svg",k=c.p+"static/media/arrow-right.3306c112.svg",E=function(e){var t=e.setFiltered,c=e.filtered,r=e.productsFiltered,n=e.products,a=e.currentPage,i=e.prevPage,l=e.nextPage,d=P,j=w,u=z,O=Object(s.useState)(!1),p=Object(o.a)(O,2),h=p[0],x=p[1];return Object(b.jsxs)("nav",{className:"products-nav",children:[Object(b.jsxs)("div",{className:"products-nav__left",children:[Object(b.jsxs)("p",{className:"products-nav__left__text",children:[0===r.length?0:r.length<16?r.length>16||n.length<16?r.length:r.length+16:a+16," of ",n.length," products"]}),Object(b.jsx)("hr",{}),Object(b.jsxs)("div",{className:"products-nav__left__controls",children:[Object(b.jsx)("p",{onClick:function(){return x(!h)},className:"products-nav__left__controls__menu",children:"Sort by:"}),Object(b.jsxs)("div",{className:"products-nav__left__controls__grid ".concat(h?"products-nav__left__controls__grid-active":void 0),children:[Object(b.jsx)("button",{className:c===u?"active":void 0,onClick:function(){t(u),x(!1)},children:"Most recent"}),Object(b.jsx)("button",{className:c===d?"active":void 0,onClick:function(){t(d),x(!1)},children:"Lower price"}),Object(b.jsx)("button",{className:c===j?"active":void 0,onClick:function(){t(j),x(!1)},children:"Highest price"})]})]})]}),Object(b.jsxs)("div",{className:"products-nav__move-pages",children:[0!==a&&Object(b.jsx)("img",{src:J,alt:"arrow-left",onClick:i}),n.length>16&&Object(b.jsx)("img",{src:k,alt:"arrow-right",onClick:l})]})]})},M=c.p+"static/media/coin.b8bc711d.svg",Y=function(e){var t=e.product,c=Object(s.useContext)(_),r=c.user,n=c.setUser,a=Object(s.useState)(!1),i=Object(o.a)(a,2),u=i[0],O=i[1],p=Object(s.useState)(!0),x=Object(o.a)(p,2),v=x[0],m=x[1];Object(s.useEffect)((function(){r.points>t.cost?O(!0):O(!1)}),[r,t]);var g=function(e){var t;m(!1),null===(t=function(e){try{return l.a.post("".concat(d,"/redeem"),{productId:e},{headers:j})}catch(t){console.log(t)}}(e._id))||void 0===t||t.then((function(){n(Object(h.a)(Object(h.a)({},r),{},{points:r.points-e.cost,redeemHistory:[].concat(Object(y.a)(r.redeemHistory),[e])})),m(!0)})).catch((function(){return m(!0)}))};return Object(b.jsxs)("div",{className:"product-card",style:{cursor:u?"pointer":void 0},children:[u?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"product-card__available"}),Object(b.jsxs)("div",{className:"product-card__hover",children:[Object(b.jsxs)("div",{className:"product-card__hover__price",children:[Object(b.jsx)("h1",{children:t.cost}),Object(b.jsx)("img",{src:M,alt:"coin"})]}),Object(b.jsx)("button",{onClick:function(){return g(t)},disabled:!v,style:{cursor:v?void 0:"default"},children:v?"Redeen now":Object(b.jsx)("div",{className:"loader product-card__loader"})})]})]}):Object(b.jsxs)("div",{className:"product-card__not-available",children:[Object(b.jsxs)("p",{children:["You need ",t.cost-r.points]}),Object(b.jsx)("img",{src:M,alt:"coin"})]}),Object(b.jsxs)("div",{className:"product-card__main",children:[Object(b.jsx)("img",{src:t.img.url,alt:""}),Object(b.jsx)("hr",{}),Object(b.jsx)("p",{className:"product-card__main__category",children:t.category}),Object(b.jsx)("p",{className:"product-card__main__name",children:t.name})]})]})},A=function(e){var t=e.productsFiltered;return e.laodProducts?0===t.length?Object(b.jsx)("div",{className:"products-grid",children:Object(b.jsx)("p",{children:"Not found products"})}):Object(b.jsx)("div",{className:"products-grid",children:t.map((function(e){return Object(b.jsx)(Y,{product:e},e._id)}))}):Object(b.jsx)("div",{className:"products-grid",children:Object(b.jsx)("div",{className:"loader",children:"Loading..."})})},S=function(){var e=Object(s.useContext)(O),t=e.products,c=e.laodProducts,r=Object(s.useState)(t),n=Object(o.a)(r,2),a=n[0],i=n[1],l=Object(s.useState)(""),d=Object(o.a)(l,2),j=d[0],u=d[1],p=Object(s.useState)(z),h=Object(o.a)(p,2),x=h[0],v=h[1],m=Object(s.useState)([]),_=Object(o.a)(m,2),g=_[0],f=_[1];Object(s.useEffect)((function(){f(a),Y(0),v(z)}),[t,j,a]),Object(s.useMemo)((function(){if(0!==j.length){var e=t.filter((function(e){return e.name.toLowerCase().includes(j.toLowerCase())}));return i(e)}i(t)}),[j,t]),Object(s.useMemo)((function(){switch(x){case P:var e=Object(y.a)(a).sort((function(e,t){return e.cost-t.cost}));return f(e);case w:var t=Object(y.a)(a).sort((function(e,t){return t.cost-e.cost}));return f(t);default:return f(a)}}),[x,a,j]);var N=I(g),C=N.productsFiltered,J=N.currentPage,k=N.prevPage,M=N.nextPage,Y=N.setCurrentPage;return Object(b.jsxs)("div",{className:"product-section",children:[Object(b.jsx)(E,{nextPage:M,prevPage:k,currentPage:J,products:a,productsFiltered:C,filtered:x,setFiltered:v}),Object(b.jsx)("input",{className:"product-section__search",placeholder:"Search products...",value:j,onChange:function(e){return u(e.target.value)}}),Object(b.jsx)("hr",{className:"product-section__hr"}),Object(b.jsx)(A,{productsFiltered:C,laodProducts:c})]})},F=function(){return Object(s.useContext)(_).loadComplete?Object(b.jsxs)("main",{className:"Content",children:[Object(b.jsx)(C,{}),Object(b.jsx)(S,{})]}):Object(b.jsx)("div",{className:"loader",children:"Loading..."})},Q=c.p+"static/media/aerolab-logo.0a8fb170.svg",T=function(){var e=Object(N.g)(),t=Object(s.useContext)(_),c=t.user,r=t.addPoint,n=t.loadComplete,a=c.name,o=c.points;return n?Object(b.jsxs)("nav",{className:"navbar",children:[Object(b.jsx)("img",{src:Q,alt:"aerolab-logo",onClick:function(){e.push("/")}}),Object(b.jsxs)("section",{className:"navbar__section",children:[Object(b.jsx)("p",{className:"navbar__section__user",onClick:function(){e.push("/user")},title:"history",children:a}),Object(b.jsxs)("div",{className:"navbar__section__points",onClick:r,title:"Add 1000 points",children:[Object(b.jsx)("p",{children:o}),Object(b.jsx)("img",{src:M,alt:"coin-icon"})]})]})]}):Object(b.jsx)("div",{})},W=function(e){var t,c=e.product;return Object(b.jsxs)("div",{className:"history-product",children:[Object(b.jsx)("img",{src:c.img.url,alt:c.name}),Object(b.jsxs)("div",{className:"history-product__content",children:[Object(b.jsx)("h2",{className:"history-product__content__name",children:c.name}),Object(b.jsx)("p",{className:"history-product__content__category",children:c.category}),Object(b.jsx)("p",{className:"history-product__content__category",children:null===(t=c.createDate)||void 0===t?void 0:t.slice(0,10)}),Object(b.jsxs)("p",{className:"history-product__content__price",children:["Price: ",Object(b.jsx)("span",{className:"c-primary",children:c.cost})]})]})]})},U=function(){var e=Object(s.useContext)(_),t=e.user,c=e.loadComplete,r=Object(s.useState)([]),n=Object(o.a)(r,2),a=n[0],i=n[1];Object(s.useEffect)((function(){c&&i(t.redeemHistory.reverse())}),[t,c]);var l=I(a),d=l.productsFiltered,j=l.prevPage,u=l.nextPage;return c?Object(b.jsxs)("div",{className:"history",children:[Object(b.jsx)("h1",{className:"history__title",children:"Remeen history"}),Object(b.jsx)("div",{className:"history__grid",children:void 0!==a?d.reverse().map((function(e,t){return Object(b.jsx)(W,{product:e},t)})):Object(b.jsx)("p",{children:"Not products"})}),Object(b.jsxs)("div",{className:"history__controls",children:[Object(b.jsx)("img",{src:J,onClick:j,alt:"arrowLeft"}),Object(b.jsx)("img",{src:k,onClick:u,alt:"arrowRight"})]})]}):Object(b.jsx)("div",{className:"loader",children:"Loading..."})},L=function(){return Object(b.jsxs)(f.a,{children:[Object(b.jsx)(T,{}),Object(b.jsxs)(N.d,{children:[Object(b.jsx)(N.b,{exact:!0,path:"/user",component:U}),Object(b.jsx)(N.b,{exact:!0,path:"/",component:F}),Object(b.jsx)(N.a,{to:"/"})]})]})},H=function(){return Object(b.jsx)(g,{children:Object(b.jsx)(p,{children:Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(L,{})})})})};c(64),c(65);a.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(H,{})}),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.0914b188.chunk.js.map